"use strict";(self.webpackChunktofi=self.webpackChunktofi||[]).push([[350],{2350:(O,d,o)=>{o.r(d),o.d(d,{RegisterComponent:()=>A});var p=o(6814),n=o(6223),l=o(2296),m=o(5195),u=o(9157),f=o(617),g=o(2032),h=o(6007),C=o(2939);function Z(i,c){return r=>{const s=r.get(i)?.value,e=r.get(c)?.value;if(!s||!e)return null;const a=s===e;return r.get(i)?.setErrors(a?null:{passwordMatchError:!0}),r.get(c)?.setErrors(a?null:{passwordMatchError:!0}),a?null:{passwordMatchError:!0}}}var k=o(8645),v=o(9773),y=o(4716),b=o(1725),w=o(5986),t=o(5879),P=o(4828),x=o(3515);function T(i,c){1&i&&t._UZ(0,"mat-progress-bar",12)}let A=(()=>{class i{constructor(r,s,e,a,F){this.fb=r,this.router=s,this.backendService=e,this.cdr=a,this.snackBar=F,this.isLoading=!1,this.showPassword=!1,this.showPasswordCheck=!1,this.destroy$$=new k.x,this.registerForm=this.fb.group({email:this.fb.control("",[n.kI.required,n.kI.maxLength(320),n.kI.email]),fullName:this.fb.control("",[n.kI.required,n.kI.maxLength(90)]),phoneNumber:this.fb.control("",[n.kI.required,n.kI.max(375999999999),n.kI.min(375e9)]),password:this.fb.control("",[n.kI.required]),passwordCheck:this.fb.control("",[n.kI.required]),twoFactorAuth:this.fb.control(!1,[n.kI.required])},{validators:Z("password","passwordCheck")})}register(){if(this.registerForm.valid){this.isLoading=!0;const r=this.registerForm.getRawValue(),s=this.transformForm(r);this.backendService.auth.register$(s).pipe((0,v.R)(this.destroy$$),(0,y.x)(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe({next:()=>{this.snackBar.openFromComponent(b.E,{data:{type:"success",message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d "}}),this.redirectToLogin()},error:e=>{const a=e.error.error_description.toString();this.snackBar.openFromComponent(b.E,{data:{type:"error",message:a}})}})}else this.registerForm.markAllAsTouched()}redirectToLogin(){this.router.navigateByUrl("auth")}ngOnDestroy(){this.destroy$$.next(),this.destroy$$.complete()}transformForm(r){return{email:r.email,full_name:r.fullName,phone_number:r.phoneNumber,password:r.password,is_enabled:!0,two_factor_auth:r.twoFactorAuth}}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(n.qu),t.Y36(P.F0),t.Y36(x.v),t.Y36(t.sBO),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-register"]],standalone:!0,features:[t.jDz],decls:39,vars:8,consts:[[3,"formGroup"],["mode","indeterminate",4,"ngIf"],["appearance","outline",1,"form-field-rec"],["matInput","","formControlName","email"],["matInput","","formControlName","fullName"],["matInput","","type","number","formControlName","phoneNumber"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","passwordCheck",3,"type"],[1,"two-factor-container"],["formControlName","twoFactorAuth"],["mat-stroked-button","",3,"disabled","click"],["mode","indeterminate"]],template:function(s,e){1&s&&(t.TgZ(0,"mat-card",0),t.YNc(1,T,1,0,"mat-progress-bar",1),t.TgZ(2,"h2"),t._uU(3,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),t.qZA(),t.TgZ(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"E-mail"),t.qZA(),t._UZ(7,"input",3),t.qZA(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"\u0424\u0418\u041e"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"mat-form-field",2)(13,"mat-label"),t._uU(14,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),t.qZA(),t._UZ(15,"input",5),t.qZA(),t.TgZ(16,"mat-form-field",2)(17,"mat-label"),t._uU(18,"\u041f\u0430\u0440\u043e\u043b\u044c"),t.qZA(),t._UZ(19,"input",6),t.TgZ(20,"button",7),t.NdJ("click",function(){return e.showPassword=!e.showPassword}),t.TgZ(21,"mat-icon"),t._uU(22),t.qZA()()(),t.TgZ(23,"mat-form-field",2)(24,"mat-label"),t._uU(25,"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0430\u0440\u043e\u043b\u044f"),t.qZA(),t._UZ(26,"input",8),t.TgZ(27,"button",7),t.NdJ("click",function(){return e.showPasswordCheck=!e.showPasswordCheck}),t.TgZ(28,"mat-icon"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",9)(31,"label"),t._uU(32,"\u0414\u0432\u0443\u0445\u0444\u0430\u043a\u0442\u043e\u0440\u043d\u0430\u044f \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"),t.qZA(),t._UZ(33,"mat-checkbox",10),t.qZA(),t.TgZ(34,"mat-card-footer")(35,"button",11),t.NdJ("click",function(){return e.register()}),t._uU(36,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),t.qZA(),t.TgZ(37,"button",11),t.NdJ("click",function(){return e.redirectToLogin()}),t._uU(38,"\u041d\u0430\u0437\u0430\u0434"),t.qZA()()()),2&s&&(t.Q6J("formGroup",e.registerForm),t.xp6(1),t.Q6J("ngIf",e.isLoading),t.xp6(18),t.Q6J("type",e.showPassword?"text":"password"),t.xp6(3),t.Oqu(e.showPassword?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",e.showPasswordCheck?"text":"password"),t.xp6(3),t.Oqu(e.showPasswordCheck?"visibility_off":"visibility"),t.xp6(6),t.Q6J("disabled",e.isLoading),t.xp6(2),t.Q6J("disabled",e.isLoading))},dependencies:[m.QW,m.a8,m.rt,u.lN,u.KE,u.hX,u.R9,g.c,g.Nt,f.Ps,f.Hw,l.ot,l.lW,l.RK,n.UX,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,h.Cv,h.pW,C.ZX,w.p9,w.oG,p.ez,p.O5],styles:["[_nghost-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;animation-name:_ngcontent-%COMP%_fadeIn;flex:1 1;animation-duration:.5s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, [_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:32px 128px;align-items:center}mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1 1;height:36px;width:100%}mat-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;width:100%}mat-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 0;height:32px;flex:1 1;font-size:16px;font-weight:500;letter-spacing:.005em}.two-factor-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;padding:0 0 16px}"],changeDetection:0})}return i})()}}]);